(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["busines/page/commonPage/waiterOrder"],{"2c6f":function(t,e,n){"use strict";(function(t){n("505a"),n("921b");a(n("66fd"));var e=a(n("7de0"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"3cb2":function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){return n.e("components/nodata").then(n.bind(null,"b7f3"))},i=function(){return n.e("components/drag-button").then(n.bind(null,"bc24"))},s={components:{xNodata:o,dragButton:i},data:function(){return{modalName:null,work_status:"",page:1,load:!1,orderlist:[],TabCur:1,scrollLeft:0,title:[{name:"桌号",width:"30%",align:"left"},{name:"菜品名称",width:"40%",align:"left"},{name:"",width:"16%",align:"center"},{name:"操作",width:"14%",align:"right"}],finishTitle:[{name:"桌号",width:"20%",align:"left"},{name:"菜品",width:"40%",align:"left"},{name:"完成时间",width:"40%",align:"right"}],type:"",typeSelect:!1,dishStatus:{},typeIndex:0,tab:[{name:"今日待办",status:"1"},{name:"今日已办",status:"3"}]}},onLoad:function(t){this.type=t.type},onShow:function(){this.getUserInfo(),this.getdishStatus(),this.getorder()},onReachBottom:function(){this.load||(this.page++,this.getorder())},onPullDownRefresh:function(){this.getorder()},methods:{getUserInfo:function(){var t=this;this.$api.ajax("smdc/user/userinfo",{shop_id:this.$store.state.shopId},function(e){if(!e.data.id){var n=t;return t.$api.toast("登录过期，请重新登录"),void setTimeout(function(){n.$api.openWin("/pages/login/login1")},1e3)}t.work_status=e.data.worker.work_status,t.$api.setStorage("kejia_order_userInfo",e.data)})},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1),this.page=1,this.orderlist.length=0,this.getorder()},selectType:function(e){console.log(t(e," at busines\\page\\commonPage\\waiterOrder.vue:184")),this.page=1,this.typeIndex=e.detail.value,this.typeSelect=!1,this.getorder()},lookDetail:function(t){this.orderlist[t].select=!this.orderlist[t].select},getdishStatus:function(){var t=this;t.load=!0,t.$api.ajax("smdc/food_process/FoodProcessList",{shop_id:t.$store.state.shopId},function(e){t.dishStatus=e.data},"POST")},getorder:function(){var t=this,e={shop_id:t.$store.state.shopId,admin_check:t.tab[t.typeIndex].status,page:t.page,status:t.TabCur};if(3==t.TabCur){var n="smdc/Worker/workload";e["type"]=t.type}else n="smdc/Sale_Food/foodDelivery";t.load=!0,t.$api.ajax(n,e,function(e){setTimeout(function(){a.stopPullDownRefresh()},2e3),t.load=!1,e.data.forEach(function(t){t.select=!1}),1==t.page?t.orderlist=e.data:t.orderlist=t.orderlist.concat(e.data)},"POST",!0)},changeTab:function(t){this.current=t,this.page=1,this.getorder()},editstatus:function(e){var n=this;console.log(t("菜品ids",e," at busines\\page\\commonPage\\waiterOrder.vue:248")),n.$api.ajax("smdc/Sale_food/toUpdateDelivery",{shop_id:n.$store.state.shopId,id:e},function(t){0==t.status?a.showModal({title:"系统提示",content:t.msg,success:function(t){t.confirm?n.getorder():t.cancel&&n.getorder()}}):n.getorder()},"POST",!0)},takeorder:function(e){var n=this;if(0==n.current)var o=1;if(1==n.current)o=3;3!=n.current&&(console.log(t("菜品ids",e," at busines\\page\\commonPage\\waiterOrder.vue:307")),n.$api.ajax("smdc/order/changeAdminCheck",{shop_id:n.$store.state.shopId,id:e,admin_check:o},function(t){0==t.status?a.showModal({title:"系统提示",content:t.msg,success:function(t){t.confirm?n.getorder():t.cancel&&n.getorder()}}):(a.showToast({title:"操作成功",icon:"success"}),n.current=3,n.getorder())},"POST",!0))}}};e.default=s}).call(this,n("0de9")["default"],n("6e42")["default"])},"5a1d":function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return t.$api.openWin("/pages/personal-center/personal-center")})},i=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return a})},"7de0":function(t,e,n){"use strict";n.r(e);var a=n("5a1d"),o=n("9229");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("d4d4");var s,r=n("f0c5"),c=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=c.exports},9229:function(t,e,n){"use strict";n.r(e);var a=n("3cb2"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},ca22:function(t,e,n){},d4d4:function(t,e,n){"use strict";var a=n("ca22"),o=n.n(a);o.a}},[["2c6f","common/runtime","common/vendor"]]]);