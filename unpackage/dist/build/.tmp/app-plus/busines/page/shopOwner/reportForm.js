(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["busines/page/shopOwner/reportForm"],{"590a":function(e,t,a){"use strict";var r,n=function(){var e=this,t=e.$createElement;e._self._c},i=[];a.d(t,"b",function(){return n}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return r})},"9c87":function(e,t,a){},"9e9f":function(e,t,a){"use strict";var r=a("9c87"),n=a.n(r);n.a},a0bc:function(e,t,a){"use strict";a.r(t);var r=a("590a"),n=a("dc3e");for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a("9e9f");var o,s=a("f0c5"),u=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);t["default"]=u.exports},d292:function(e,t,a){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("b389"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(){return a.e("busines/components/progress").then(a.bind(null,"68ac"))},s=function(){return a.e("components/nodata").then(a.bind(null,"b7f3"))},u=null,d=null,c={components:{progress:o,nodata:s},data:function(){return{dimension:["周","月","年"],dIndex:0,weekArr:[],loading:!1,Time:[],TabCur:"",scrollLeft:0,cWidth:"",cHeight:"",pixelRatio:1,Interactive:"",toatal:"",food_count:"",turnover:[]}},onLoad:function(){var t=this;t.TabCur=t.Time.length-1,t.scrollLeft=60*(t.TabCur-1),t.getTimeNow(),t.cWidth=e.upx2px(750),t.cHeight=e.upx2px(500),setTimeout(function(){t.loading=!0},500)},methods:{getLastDay:function(e,t){var a=e,r=t++;t>12&&(r-=12,a++);var n=new Date(a,r,1);return new Date(n.getTime()-864e5).getDate()},timeSelect:function(e,t,a){var r=this,n=r.getLastDay(t,a);if(r.TabCur=e,r.scrollLeft=60*(e-1),1==r.dIndex){r.weekArr=[];for(var i=1;i<30;i++)i%5==0&&i<26&&r.weekArr.push(i);r.weekArr.push(n)}if(2==r.dIndex){r.weekArr=[];for(var o=1;o<13;o++)r.weekArr.push(o+"月")}this.getServerData(this.Time[e].start,this.Time[e].end)},selectType:function(e){this.dIndex=e,0==this.dIndex&&this.getTimeNow(),1==this.dIndex&&this.getMontharea(),2==this.dIndex&&this.getYeararea()},getMontharea:function(){var e=this;e.Time=[];var t=new Date,a=t.getFullYear();t.setMonth(t.getMonth()+1,1);for(var r=0;r<12;r++){t.setMonth(t.getMonth()-1);var n=t.getMonth()+1;n=n<10?"0"+n:n;var i={};1==n&&a--,i["name"]=a+"/"+n,i["start"]=a+"/"+n+"/1 00:00:00",i["end"]=a+"/"+n+"/"+e.getLastDay(a,n)+" 00:00:00",i["month"]=n,i["year"]=a,e.Time.unshift(i)}e.TabCur=e.Time.length-1,e.scrollLeft=60*(e.TabCur-1),e.weekArr=[];for(var o=1;o<e.getLastDay(a,n)+1;o++)o%5==0&&e.weekArr.push(o);e.getServerData(e.Time[11].start,e.Time[11].end)},getYeararea:function(){var e=this,t=new Date,a=t.getFullYear();e.Time=[];for(var r=0;r<3;r++){var n={};n["name"]=a+"年",n["start"]=a+"/1/1 00:00:00",n["end"]=a+"/12/"+e.getLastDay(a,12)+" 00:00:00",n["year"]=a,a-=1,e.Time.unshift(n)}e.TabCur=e.Time.length-1,e.scrollLeft=120*(e.TabCur-1),e.weekArr=[];for(var i=1;i<13;i++)e.weekArr.push(i+"月");e.getServerData(e.Time[2].start,e.Time[2].end)},getServerData:function(t,a){e.showLoading({title:"加载中.."});var n=this;t=new Date(t).getTime(),a=new Date(a).getTime(),n.$api.ajax("smdc/Shop_count/count",{shop_id:n.$store.state.shopId,type:n.dIndex+1,start_time:t/1e3,end_time:a/1e3},function(e){var t={categories:[],series:[]};n.toatal=e.data.turnover_total,n.worker_num=e.data.worker_num,n.food_count=e.data.food_count,n.turnover=e.data.turnover,console.log(r("[getServerData]",n.weekArr," at busines\\page\\shopOwner\\reportForm.vue:250")),t.categories=n.weekArr;var a=[{name:"营业额(元)",data:e.data.turnover}];t.series=a,n.showLineA("canvasLineA",t)})},showLineA:function(t,a){e.hideLoading();var r=this;u=new n.default({$this:r,canvasId:t,type:"line",colors:["#facc14","#90ed7d","#8543e0","#90ed7d"],fontSize:11,padding:[15,15,0,15],legend:{show:!0,padding:5,lineHeight:11,margin:0},dataLabel:!1,dataPointShape:!0,background:"#FFFFFF",pixelRatio:r.pixelRatio,categories:a.categories,series:a.series,animation:!0,xAxis:{type:"grid",gridColor:"#CCCCCC",gridType:"dash",dashLength:8},yAxis:{gridType:"dash",gridColor:"#CCCCCC",dashLength:8},width:r.cWidth*r.pixelRatio,height:r.cHeight*r.pixelRatio,extra:{line:{type:"straight"}}})},touchLineA:function(e){d=Date.now()},moveLineA:function(e){var t=Date.now(),a=t-d;if(!(a<Math.floor(1e3/60))){d=t;var r=u.getCurrentDataIndex(e);if(r>-1&&r<u.opts.categories.length){var n=u.opts.categories[r],i=u.opts.series[0].name,o=u.opts.series[0].data[r];this.Interactive=i+":"+n+"-"+o+"元"}u.showToolTip(e,{format:function(e,t){return t+" "+e.name+":"+e.data}})}},touchEndLineA:function(e){var t=u.getCurrentDataIndex(e);if(t>-1&&t<u.opts.categories.length){var a=u.opts.categories[t],r=u.opts.series[0].name,n=u.opts.series[0].data[t];this.Interactive=r+":"+a+"-"+n+"元"}u.touchLegend(e),u.showToolTip(e,{format:function(e,t){return t+" "+e.name+":"+e.data}})},getTimeNow:function(){var e=new Date,t=e.getTime(),a=(e.getDay(),e.getFullYear()),r=864e5;this.weekArr=[];for(var n=0;n<7;n++){var i=t-(n+1)*r,o=(i=new Date(i),i.getMonth()+1),s=i.getDate(),u=o+"/"+s;this.weekArr.unshift(u)}var d=a+"/"+this.weekArr[0]+" 00:00:00",c=a+"/"+this.weekArr[6]+" 23:59:59";this.getServerData(d,c)}}};t.default=c}).call(this,a("6e42")["default"],a("0de9")["default"])},dc3e:function(e,t,a){"use strict";a.r(t);var r=a("d292"),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t["default"]=n.a},f9b9:function(e,t,a){"use strict";(function(e){a("505a"),a("921b");r(a("66fd"));var t=r(a("a0bc"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])}},[["f9b9","common/runtime","common/vendor"]]]);