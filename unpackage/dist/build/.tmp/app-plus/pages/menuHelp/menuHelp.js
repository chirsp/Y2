(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/menuHelp/menuHelp"],{"2b39":function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("2f62");function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){s(t,e,n[e])})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=t.getSystemInfoSync(),u=function(){return n.e("components/footer").then(n.bind(null,"e6ad"))},d=function(){return n.e("components/goods").then(n.bind(null,"b923"))},c=function(){return n.e("components/evaluate").then(n.bind(null,"969a"))},l={data:function(){return{sys:r,placeholder:"请输入菜品关键词",keyWord:"",scroll_h:0,current:0,tab:[],mask_show:!1,totalCount:0,totalMoney:0,originMoney:0,status:1,isIpx:-1,foodlist:[],page:1,isLoad:!1,refresh:!1,Tab:["点餐","评价"],TabCur:0,scrollLeft:0,listeva:"",order_id:"",evaCount:0}},computed:(0,i.mapState)(["_buyList","_orderId","_orderNo"]),components:{xFooter:u,goods:d,evaluate:c},onPullDownRefresh:function(){this.getList()},onReachBottom:function(){this.isLoad||1==this.TabCur&&(this.page++,this.init())},onLoad:function(){this.isIpx=r.model.indexOf("iPhone X");var t=this.$api.getStorage("wx_audit");this.status=t.status,this.init()},onShow:function(){this.getScrollHeight(),this.getMenuList()},methods:a({},(0,i.mapMutations)(["_addBuyList","_removeBuyList","_clearBuyList","_initBuyList"]),{init:function(){var t=this;t.isLoad=!0,t.$api.ajax("smdc/Comment/index",{shop_id:t.$store.state.shopId,order_id:t.order_id,page:t.page,limit:10},function(e){t.isLoad=!1,t.evaCount=e.count,1==t.page?t.listeva=e.data:t.listeva.concat(e.data)})},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1),this.page=1},getMore:function(){this.getList()},doSearch:function(){this.$api.openWin("../goodsList/goodsList")},getScrollHeight:function(){var t=r.windowHeight,e=r.windowWidth,n=300,o=n/2*(e/375);this.scroll_h=t-o},changeCurrent:function(t){this.current=t,this.getList()},getMenuList:function(){var t=this;t.$api.ajax("smdc/food/get_cat",{shop_id:t.$store.state.shopId,deskid:t.$store.state.deskId},function(e){t.tab=e.data,t.getList()})},getList:function(){var e=this;e.$api.ajax("smdc/cart/food",{shop_id:e.$store.state.shopId,deskid:e.$store.state.deskId,search:"",type:"",limit:10,page:e.page,cat_id:e.tab[e.current].id},function(n){var o=n.data.foodlist;setTimeout(function(){t.stopPullDownRefresh()},1e3),o.length?(e.totalCount=n.data.totalCount,e.totalMoney=n.data.totalMoney,e.originMoney=n.data.originMoney,1==e.page?e.foodlist=o:e.foodlist=e.foodlist.concat(o)):e.more=!1})},addNums:function(t){var e=this;e.$api.ajax("smdc/cart/add",{shop_id:e.$store.state.shopId,deskid:e.$store.state.deskId,id:e.foodlist[t].id},function(t){e.getList()})},syncNums:function(t){this.tab.map(function(e){return e.list.map(function(e){return t.id==e.id?e.num=t.num:""})})},removeNums:function(t){console.log(o("减少数量"," at pages\\menuHelp\\menuHelp.vue:258"));var e=this;e.$api.ajax("smdc/cart/sub",{shop_id:e.$store.state.shopId,deskid:e.$store.state.deskId,id:e.foodlist[t].id},function(t){e.getList()})},clearBuyCar:function(){var t=this;t.$api.ajax("smdc/cart/clearAll",{shop_id:t.$store.state.shopId,deskid:t.$store.state.deskId},function(e){t.mask_show=!1,t.getList()})},showMask:function(){this.mask_show=!0},hideMask:function(){this.mask_show=!1},toggleMask:function(){this.totalMoney?this.mask_show=!this.mask_show:console.log(o("未点单"," at pages\\menuHelp\\menuHelp.vue:291"))},totalPrice:function(){var t=0,e=0,n=0;this._buyList.forEach(function(o){return o.num&&("0.00"==o.sale_price?t+=o.price*parseInt(o.num):t+=o.sale_price*parseInt(o.num)),o.num&&(n+=o.price*parseInt(o.num)),o.num?e+=o.num:""}),this.totalMoney=parseFloat(t).toFixed(2),this.originMoney=parseFloat(n).toFixed(2),this.totalCount=e},getOrder:function(){if(0!=this.totalCount&&"0"!=this.totalCount){var t=[];this.foodlist.forEach(function(e){return e.nums?t.push(e):""});var e=encodeURIComponent(JSON.stringify(t));this.$api.openWin("../order/order?data="+e+"&totalMoney="+this.totalMoney)}},lookTableOrder:function(){t.navigateTo({url:"/pages/personal-center/tableOrder"})}})};e.default=l}).call(this,n("6e42")["default"],n("0de9")["default"])},"413c":function(t,e,n){},"58d3":function(t,e,n){"use strict";n.r(e);var o=n("2b39"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=i.a},"97fd":function(t,e,n){"use strict";var o=n("413c"),i=n.n(o);i.a},"9de6":function(t,e,n){"use strict";(function(t){n("505a"),n("921b");o(n("66fd"));var e=o(n("dd1b"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},dd1b:function(t,e,n){"use strict";n.r(e);var o=n("eb9d"),i=n("58d3");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("97fd");var s,r=n("f0c5"),u=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);e["default"]=u.exports},eb9d:function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return o})}},[["9de6","common/runtime","common/vendor"]]]);