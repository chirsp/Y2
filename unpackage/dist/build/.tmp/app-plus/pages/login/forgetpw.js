(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/forgetpw"],{"0e63":function(t,i,e){"use strict";var o=e("a63e"),s=e.n(o);s.a},"901f":function(t,i,e){"use strict";(function(t){e("505a"),e("921b");o(e("66fd"));var i=o(e("e3d7"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("6e42")["createPage"])},"95bc":function(t,i,e){"use strict";e.r(i);var o=e("a31b"),s=e.n(o);for(var n in o)"default"!==n&&function(t){e.d(i,t,function(){return o[t]})}(n);i["default"]=s.a},a31b:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{maxMobile:11,mobile:"",code:"",pwd:"",pwd1:"",pwd2:"",verification:!0,timer:60,btnb:"btn btn-c btn-square btn-all",type:""}},onLoad:function(i){var e=this;this.type=i.type,this.verification=!0,"reset"==this.type?(t.setNavigationBarTitle({title:"重置密码"}),this.mobile=this.$api.getStorage("kejia_order_userInfo").mobile):t.setNavigationBarTitle({title:"修改密码"}),e.timer=parseInt(e.$api.getStorage("timer")),null!=e.timer&&e.timer>0&&(e.countDown(),e.verification=!1),i.invitecode&&this.$api.setStorage("invitecode",i.invitecode)},computed:{rightMobile:function(){var t={};return this.mobile?/^1[3456789]{1}\d{9}$/gi.test(this.mobile)?t.status=!0:(t.status=!1,t.msg="手机号格式不正确"):(t.status=!1,t.msg="请输入手机号"),t},regButtonClass:function(){return"reset"==this.type?this.pwd2&&this.pwd1&&this.code?this.btnb+" btn-b":this.btnb:"modify"==this.type?this.pwd&&this.pwd1&&this.pwd2?this.btnb+" btn-b":this.btnb:void 0},sendCodeBtn:function(){var t="btn btn-g";return this.mobile&&this.mobile.length===this.maxMobile&&this.rightMobile.status?t+" btn-b":t},logoImage:function(){return this.$store.state.shop_logo}},onShow:function(){var i=this,e=i.$api.getStorage("kejia_order_token");if(e&&""!=e)return t.switchTab({url:"/pages/index/index"}),!0;i.timer=parseInt(i.$api.getStorage("timer")),null!=i.timer&&i.timer>0&&(i.countDown(),i.verification=!1)},methods:{sendCode:function(){var i=this;i.rightMobile.status?(t.showLoading({title:"发送中..."}),setTimeout(function(){t.hideLoading(),i.$api.ajax("smdc/user/sendCode",{mobile:i.mobile,shop_id:i.$store.state.shopId,template_id:2},function(t){i.timer=60,i.verification=!1,i.countDown(),i.btnb="btn btn-square btn-all btn-b"},"POST")},1e3)):i.$api.errorToShow(i.rightMobile.msg)},countDown:function(){var i=this,e=setInterval(function(){i.timer--,t.setStorage({key:"timer",data:i.timer,success:function(){}}),i.timer<=0&&(i.verification=!0,clearInterval(e))},1e3)},toReg:function(){"reset"==this.type&&this.resetPsd(),"modify"==this.type&&this.modifPsd()},resetPsd:function(){if(this.rightMobile.status)if(this.code)if(this.pwd1!=this.pwd2)this.$api.errorToShow("两次密码输入不一致");else{var i={password:this.pwd1,code:this.code,mobile:this.mobile,shop_id:this.$store.state.shopId},e=this;e.$api.ajax("smdc/user/resetPassword",i,function(i){e.$api.toast("密码重置成功"),t.navigateBack({delta:1})},"POST")}else this.$api.errorToShow("请输入短信验证码");else this.$api.errorToShow(this.rightMobile.msg)},modifPsd:function(){if(this.pwd&&this.pwd1&&this.pwd2)if(this.pwd1!=this.pwd2)this.$api.errorToShow("输入的新密码与确认密码不一制，请重新输入");else{var i={password:this.pwd1,password1:this.pwd2,passwordOld:this.pwd,shop_id:this.$store.state.shopId},e=this;e.$api.ajax("smdc/user/revisePassword",i,function(i){e.$api.toast("密码修改成功"),t.navigateBack({delta:1})},"POST")}else this.$api.errorToShow("请输入完整信息")},toLogin:function(){this.$api.openWin("/pages/login/login1")}}};i.default=e}).call(this,e("6e42")["default"])},a63e:function(t,i,e){},ce0c:function(t,i,e){"use strict";var o,s=function(){var t=this,i=t.$createElement;t._self._c},n=[];e.d(i,"b",function(){return s}),e.d(i,"c",function(){return n}),e.d(i,"a",function(){return o})},e3d7:function(t,i,e){"use strict";e.r(i);var o=e("ce0c"),s=e("95bc");for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);e("0e63");var r,a=e("f0c5"),d=Object(a["a"])(s["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);i["default"]=d.exports}},[["901f","common/runtime","common/vendor"]]]);