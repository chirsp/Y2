(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/bingphone"],{"08e3":function(t,e,i){"use strict";i.r(e);var n=i("d01c"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},"28a9":function(t,e,i){},"795c":function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"b",function(){return o}),i.d(e,"c",function(){return a}),i.d(e,"a",function(){return n})},"8a38":function(t,e,i){"use strict";var n=i("28a9"),o=i.n(n);o.a},"9add":function(t,e,i){"use strict";i.r(e);var n=i("795c"),o=i("08e3");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("8a38");var r,s=i("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=u.exports},d01c:function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,a=i("2f62");function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){s(t,e,i[e])})}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u=(o={data:function(){return{maxMobile:11,mobile:"",code:"",pwd:"",username:"",verification:!0,timer:60,btnb:"btn btn-c btn-square btn-all",wxinfo:""}},onLoad:function(t){var e=this;e.timer=parseInt(e.$api.getStorage("timer")),null!=e.timer&&e.timer>0&&(e.countDown(),e.verification=!1),t.invitecode&&this.$api.setStorage("invitecode",t.invitecode)},computed:{rightMobile:function(){var t={};return this.mobile?/^1[3456789]{1}\d{9}$/gi.test(this.mobile)?t.status=!0:(t.status=!1,t.msg="手机号格式不正确"):(t.status=!1,t.msg="请输入手机号"),t},regButtonClass:function(){return this.mobile&&11===this.mobile.length?this.btnb+" btn-b":this.btnb},sendCodeBtn:function(){var t="btn btn-g";return this.mobile&&this.mobile.length===this.maxMobile&&this.rightMobile.status?t+" btn-b":t},logoImage:function(){return this.$store.state.shop_logo}}},s(o,"onLoad",function(t){this.wxinfo=JSON.parse(t.wxinfo)}),s(o,"onShow",function(){var e=this,i=e.$api.getStorage("kejia_order_token");if(i&&""!=i)return t.switchTab({url:"/pages/index/index"}),!0;e.timer=parseInt(e.$api.getStorage("timer")),null!=e.timer&&e.timer>0&&(e.countDown(),e.verification=!1)}),s(o,"methods",r({},(0,a.mapMutations)(["login","changeNeedScan"]),{sendCode:function(){var e=this;e.rightMobile.status?(t.showLoading({title:"发送中..."}),setTimeout(function(){t.hideLoading(),e.$api.ajax("smdc/user/sendCode",{mobile:e.mobile,shop_id:e.$store.state.shopId,template_id:3},function(t){e.timer=60,e.verification=!1,e.countDown(),e.btnb="btn btn-square btn-all btn-b"},"POST")},1e3)):e.$api.errorToShow(e.rightMobile.msg)},countDown:function(){var e=this,i=setInterval(function(){e.timer--,t.setStorage({key:"timer",data:e.timer,success:function(){}}),e.timer<=0&&(e.verification=!0,clearInterval(i))},1e3)},toReg:function(){if(this.rightMobile.status)if(this.code){var t="app",e={mobile:this.mobile,code:this.code,openid:this.wxinfo.openid,nickName:this.wxinfo.nickName,avatarUrl:this.wxinfo.avatarUrl,shop_id:this.$store.state.shopId,type:t},i=this;i.$api.ajax("smdc/user/weixinBind",e,function(t){console.log(n("绑定回调",t," at pages\\login\\bingphone.vue:190")),t.data.id?i.$api.toast("登录成功","success"):i.$api.toast("未成功登陆，请重试");var e={uid:t.data.id,userInfo:t.data};i.login(e),i.$api.setStorage("kejia_order_uid",t.data.id),i.$api.setStorage("kejia_order_openId",t.data.openid),i.$api.setStorage("kejia_order_userInfo",t.data),i.$api.setStorage("kejia_order_token",t.data.token),setTimeout(function(){i.$api.openWin("/pages/personal-center/personal-center")},2e3)},"POST")}else this.$api.errorToShow("请输入短信验证码");else this.$api.errorToShow(this.rightMobile.msg)},toLogin:function(){this.$api.openWin("/pages/login/login1")}})),o);e.default=u}).call(this,i("6e42")["default"],i("0de9")["default"])},f6ab:function(t,e,i){"use strict";(function(t){i("505a"),i("921b");n(i("66fd"));var e=n(i("9add"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])}},[["f6ab","common/runtime","common/vendor"]]]);