(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/codelogin"],{1095:function(t,e,i){"use strict";i.r(e);var n=i("5d88"),o=i("8faa");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("a52e");var r,s=i("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=u.exports},"126b":function(t,e,i){},"4b39":function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i("2f62");function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){r(t,e,i[e])})}return t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s={data:function(){return{maxMobile:11,mobile:"",code:"",user_wx_id:"",verification:!0,timer:60,btnb:"btn btn-square btn-c btn-all",type:"",isWeixinBrowser:this.$api.isWeiXinBrowser()}},onLoad:function(t){this.verification=!0},computed:{rightMobile:function(){var t={};return this.mobile?/^1[3456789]{1}\d{9}$/gi.test(this.mobile)?t.status=!0:(t.status=!1,t.msg="手机号格式不正确"):(t.status=!1,t.msg="请输入手机号"),t},sendCodeBtn:function(){var t="btn btn-g";return this.rightMobile.status?t+" btn-b":t},regButtonClass:function(){return this.mobile&&this.mobile.length===this.maxMobile&&this.code?this.btnb+" btn-b":this.btnb}},onShow:function(){var e=this,i=e.$api.getStorage("kejia_order_token");if(console.log(t(i," at pages\\login\\codelogin.vue:80")),i)return n.switchTab({url:"/pages/index/index"}),!0;e.timer=parseInt(e.$api.getStorage("timer")),null!=e.timer&&e.timer>0&&(e.countDown(),e.verification=!1)},methods:a({},(0,o.mapMutations)(["login"]),{sendCode:function(){var t=this;this.rightMobile.status?(n.showLoading({title:"发送中..."}),setTimeout(function(){n.hideLoading();var e=t;e.$api.ajax("smdc/user/sendCode",{mobile:e.mobile,shop_id:e.$store.state.shopId,template_id:2},function(t){e.timer=60,e.verification=!1,e.countDown()},"POST")},1e3)):this.$api.toast(this.rightMobile.msg)},toReg:function(){this.$api.openWin("/pages/login/register")},countDown:function(){var t=this,e=setInterval(function(){t.timer--,n.setStorage({key:"timer",data:t.timer,success:function(){}}),t.timer<=0&&(t.verification=!0,clearInterval(e))},1e3)},redirectHandler:function(){var t=this;this.$api.successToShow("登录成功!",function(){t.$api.setStorage("timer",0),t.$api.del("invitecode"),t.handleBack()})},toLogin:function(){n.navigateTo({url:"/pages/login/login1"})},showTopTips:function(){var t=this;return""==t.mobile?(t.$api.toast("请输入手机号码"),!1):""==this.code?(t.$api.toast("请输入验证码"),!1):void t.$api.ajax("smdc/user/loginByCode",{mobile:t.mobile,shop_id:t.$store.state.shopId,code:t.code},function(e){var i={uid:e.data.id,userInfo:e.data};t.login(i),t.$api.setStorage("kejia_order_uid",e.data.id),t.$api.setStorage("kejia_order_openId",e.data.openid),t.$api.setStorage("kejia_order_userInfo",e.data),t.$api.setStorage("kejia_order_token",e.token),n.navigateBack(),n.reLaunch({url:"/pages/index/index"})},"POST")},selectLoginType:function(){this.$api.openWin("/pages/login/login1")}})};e.default=s}).call(this,i("0de9")["default"],i("6e42")["default"])},"5d88":function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"b",function(){return o}),i.d(e,"c",function(){return a}),i.d(e,"a",function(){return n})},"8faa":function(t,e,i){"use strict";i.r(e);var n=i("4b39"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},a4a5:function(t,e,i){"use strict";(function(t){i("505a"),i("921b");n(i("66fd"));var e=n(i("1095"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},a52e:function(t,e,i){"use strict";var n=i("126b"),o=i.n(n);o.a}},[["a4a5","common/runtime","common/vendor"]]]);